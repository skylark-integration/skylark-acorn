/**
 * skylark-acorn - A version of acorn that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./tokentype","./tokencontext","./state","./parseutil","./whitespace","./scopeflags"],function(t,e,s,i,r,a){"use strict";const{Parser:n}=s,{DestructuringErrors:o}=i,{lineBreak:h}=r,{functionFlags:p,SCOPE_ARROW:c,SCOPE_SUPER:l,SCOPE_DIRECT_SUPER:d,BIND_OUTSIDE:u,BIND_VAR:m}=a,y=n.prototype;y.checkPropClash=function(t,e,s){if(this.options.ecmaVersion>=9&&"SpreadElement"===t.type)return;if(this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))return;let i,{key:r}=t;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}let{kind:a}=t;if(this.options.ecmaVersion>=6)return void("__proto__"===i&&"init"===a&&(e.proto&&(s?s.doubleProto<0&&(s.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),e.proto=!0));let n=e[i="$"+i];if(n){let t;(t="init"===a?this.strict&&n.init||n.get||n.set:n.init||n[a])&&this.raiseRecoverable(r.start,"Redefinition of property")}else n=e[i]={init:!1,get:!1,set:!1};n[a]=!0},y.parseExpression=function(e,s){let i=this.start,r=this.startLoc,a=this.parseMaybeAssign(e,s);if(this.type===t.comma){let n=this.startNodeAt(i,r);for(n.expressions=[a];this.eat(t.comma);)n.expressions.push(this.parseMaybeAssign(e,s));return this.finishNode(n,"SequenceExpression")}return a},y.parseMaybeAssign=function(e,s,i){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}let r=!1,a=-1,n=-1,h=-1;s?(a=s.parenthesizedAssign,n=s.trailingComma,h=s.doubleProto,s.parenthesizedAssign=s.trailingComma=-1):(s=new o,r=!0);let p=this.start,c=this.startLoc;this.type!==t.parenL&&this.type!==t.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===e);let l=this.parseMaybeConditional(e,s);if(i&&(l=i.call(this,l,p,c)),this.type.isAssign){let i=this.startNodeAt(p,c);return i.operator=this.value,this.type===t.eq&&(l=this.toAssignable(l,!1,s)),r||(s.parenthesizedAssign=s.trailingComma=s.doubleProto=-1),s.shorthandAssign>=l.start&&(s.shorthandAssign=-1),this.type===t.eq?this.checkLValPattern(l):this.checkLValSimple(l),i.left=l,this.next(),i.right=this.parseMaybeAssign(e),h>-1&&(s.doubleProto=h),this.finishNode(i,"AssignmentExpression")}return r&&this.checkExpressionErrors(s,!0),a>-1&&(s.parenthesizedAssign=a),n>-1&&(s.trailingComma=n),l},y.parseMaybeConditional=function(e,s){let i=this.start,r=this.startLoc,a=this.parseExprOps(e,s);if(this.checkExpressionErrors(s))return a;if(this.eat(t.question)){let s=this.startNodeAt(i,r);return s.test=a,s.consequent=this.parseMaybeAssign(),this.expect(t.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return a},y.parseExprOps=function(t,e){let s=this.start,i=this.startLoc,r=this.parseMaybeUnary(e,!1,!1,t);return this.checkExpressionErrors(e)?r:r.start===s&&"ArrowFunctionExpression"===r.type?r:this.parseExprOp(r,s,i,-1,t)},y.parseExprOp=function(e,s,i,r,a){let n=this.type.binop;if(null!=n&&(!a||this.type!==t._in)&&n>r){let o=this.type===t.logicalOR||this.type===t.logicalAND,h=this.type===t.coalesce;h&&(n=t.logicalAND.binop);let p=this.value;this.next();let c=this.start,l=this.startLoc,d=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,a),c,l,n,a),u=this.buildBinary(s,i,e,d,p,o||h);return(o&&this.type===t.coalesce||h&&(this.type===t.logicalOR||this.type===t.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(u,s,i,r,a)}return e},y.buildBinary=function(t,e,s,i,r,a){"PrivateIdentifier"===i.type&&this.raise(i.start,"Private identifier can only be left side of binary expression");let n=this.startNodeAt(t,e);return n.left=s,n.operator=r,n.right=i,this.finishNode(n,a?"LogicalExpression":"BinaryExpression")},y.parseMaybeUnary=function(e,s,i,r){let a,n=this.start,o=this.startLoc;if(this.isContextual("await")&&this.canAwait)a=this.parseAwait(r),s=!0;else if(this.type.prefix){let i=this.startNode(),n=this.type===t.incDec;i.operator=this.value,i.prefix=!0,this.next(),i.argument=this.parseMaybeUnary(null,!0,n,r),this.checkExpressionErrors(e,!0),n?this.checkLValSimple(i.argument):this.strict&&"delete"===i.operator&&"Identifier"===i.argument.type?this.raiseRecoverable(i.start,"Deleting local variable in strict mode"):"delete"===i.operator&&function t(e){return"MemberExpression"===e.type&&"PrivateIdentifier"===e.property.type||"ChainExpression"===e.type&&t(e.expression)}(i.argument)?this.raiseRecoverable(i.start,"Private fields can not be deleted"):s=!0,a=this.finishNode(i,n?"UpdateExpression":"UnaryExpression")}else if(s||this.type!==t.privateId){if(a=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){let t=this.startNodeAt(n,o);t.operator=this.value,t.prefix=!1,t.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(t,"UpdateExpression")}}else(r||0===this.privateNameStack.length)&&this.options.checkPrivateFields&&this.unexpected(),a=this.parsePrivateIdent(),this.type!==t._in&&this.unexpected();return i||!this.eat(t.starstar)?a:s?void this.unexpected(this.lastTokStart):this.buildBinary(n,o,a,this.parseMaybeUnary(null,!1,!1,r),"**",!1)},y.parseExprSubscripts=function(t,e){let s=this.start,i=this.startLoc,r=this.parseExprAtom(t,e);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;let a=this.parseSubscripts(r,s,i,!1,e);return t&&"MemberExpression"===a.type&&(t.parenthesizedAssign>=a.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=a.start&&(t.parenthesizedBind=-1),t.trailingComma>=a.start&&(t.trailingComma=-1)),a},y.parseSubscripts=function(t,e,s,i,r){let a=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start==5&&this.potentialArrowAt===t.start,n=!1;for(;;){let o=this.parseSubscript(t,e,s,i,a,n,r);if(o.optional&&(n=!0),o===t||"ArrowFunctionExpression"===o.type){if(n){const t=this.startNodeAt(e,s);t.expression=o,o=this.finishNode(t,"ChainExpression")}return o}t=o}},y.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(t.arrow)},y.parseSubscriptAsyncArrow=function(t,e,s,i){return this.parseArrowExpression(this.startNodeAt(t,e),s,!0,i)},y.parseSubscript=function(e,s,i,r,a,n,h){let p=this.options.ecmaVersion>=11,c=p&&this.eat(t.questionDot);r&&c&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");let l=this.eat(t.bracketL);if(l||c&&this.type!==t.parenL&&this.type!==t.backQuote||this.eat(t.dot)){let r=this.startNodeAt(s,i);r.object=e,l?(r.property=this.parseExpression(),this.expect(t.bracketR)):this.type===t.privateId&&"Super"!==e.type?r.property=this.parsePrivateIdent():r.property=this.parseIdent("never"!==this.options.allowReserved),r.computed=!!l,p&&(r.optional=c),e=this.finishNode(r,"MemberExpression")}else if(!r&&this.eat(t.parenL)){let r=new o,n=this.yieldPos,l=this.awaitPos,d=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;let u=this.parseExprList(t.parenR,this.options.ecmaVersion>=8,!1,r);if(a&&!c&&this.shouldParseAsyncArrow())return this.checkPatternErrors(r,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=n,this.awaitPos=l,this.awaitIdentPos=d,this.parseSubscriptAsyncArrow(s,i,u,h);this.checkExpressionErrors(r,!0),this.yieldPos=n||this.yieldPos,this.awaitPos=l||this.awaitPos,this.awaitIdentPos=d||this.awaitIdentPos;let m=this.startNodeAt(s,i);m.callee=e,m.arguments=u,p&&(m.optional=c),e=this.finishNode(m,"CallExpression")}else if(this.type===t.backQuote){(c||n)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");let t=this.startNodeAt(s,i);t.tag=e,t.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(t,"TaggedTemplateExpression")}return e},y.parseExprAtom=function(s,i,r){this.type===t.slash&&this.readRegexp();let a,n=this.potentialArrowAt===this.start;switch(this.type){case t._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),a=this.startNode(),this.next(),this.type!==t.parenL||this.allowDirectSuper||this.raise(a.start,"super() call outside constructor of a subclass"),this.type!==t.dot&&this.type!==t.bracketL&&this.type!==t.parenL&&this.unexpected(),this.finishNode(a,"Super");case t._this:return a=this.startNode(),this.next(),this.finishNode(a,"ThisExpression");case t.name:let o=this.start,h=this.startLoc,p=this.containsEsc,c=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!p&&"async"===c.name&&!this.canInsertSemicolon()&&this.eat(t._function))return this.overrideContext(e.f_expr),this.parseFunction(this.startNodeAt(o,h),0,!1,!0,i);if(n&&!this.canInsertSemicolon()){if(this.eat(t.arrow))return this.parseArrowExpression(this.startNodeAt(o,h),[c],!1,i);if(this.options.ecmaVersion>=8&&"async"===c.name&&this.type===t.name&&!p&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return c=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(t.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(o,h),[c],!0,i)}return c;case t.regexp:let l=this.value;return(a=this.parseLiteral(l.value)).regex={pattern:l.pattern,flags:l.flags},a;case t.num:case t.string:return this.parseLiteral(this.value);case t._null:case t._true:case t._false:return(a=this.startNode()).value=this.type===t._null?null:this.type===t._true,a.raw=this.type.keyword,this.next(),this.finishNode(a,"Literal");case t.parenL:let d=this.start,u=this.parseParenAndDistinguishExpression(n,i);return s&&(s.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(s.parenthesizedAssign=d),s.parenthesizedBind<0&&(s.parenthesizedBind=d)),u;case t.bracketL:return a=this.startNode(),this.next(),a.elements=this.parseExprList(t.bracketR,!0,!0,s),this.finishNode(a,"ArrayExpression");case t.braceL:return this.overrideContext(e.b_expr),this.parseObj(!1,s);case t._function:return a=this.startNode(),this.next(),this.parseFunction(a,0);case t._class:return this.parseClass(this.startNode(),!1);case t._new:return this.parseNew();case t.backQuote:return this.parseTemplate();case t._import:return this.options.ecmaVersion>=11?this.parseExprImport(r):this.unexpected();default:return this.parseExprAtomDefault()}},y.parseExprAtomDefault=function(){this.unexpected()},y.parseExprImport=function(e){const s=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");const i=this.parseIdent(!0);return this.type!==t.parenL||e?this.type===t.dot?(s.meta=i,this.parseImportMeta(s)):void this.unexpected():this.parseDynamicImport(s)},y.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(t.parenR)){const e=this.start;this.eat(t.comma)&&this.eat(t.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(e,"ImportExpression")},y.parseImportMeta=function(t){this.next();const e=this.containsEsc;return t.property=this.parseIdent(!0),"meta"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")},y.parseLiteral=function(t){let e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")},y.parseParenExpression=function(){this.expect(t.parenL);let e=this.parseExpression();return this.expect(t.parenR),e},y.shouldParseArrow=function(t){return!this.canInsertSemicolon()},y.parseParenAndDistinguishExpression=function(e,s){let i,r=this.start,a=this.startLoc,n=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();let h,p=this.start,c=this.startLoc,l=[],d=!0,u=!1,m=new o,y=this.yieldPos,f=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==t.parenR;){if(d?d=!1:this.expect(t.comma),n&&this.afterTrailingComma(t.parenR,!0)){u=!0;break}if(this.type===t.ellipsis){h=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===t.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,m,this.parseParenItem))}let x=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(t.parenR),e&&this.shouldParseArrow(l)&&this.eat(t.arrow))return this.checkPatternErrors(m,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=y,this.awaitPos=f,this.parseParenArrowList(r,a,l,s);l.length&&!u||this.unexpected(this.lastTokStart),h&&this.unexpected(h),this.checkExpressionErrors(m,!0),this.yieldPos=y||this.yieldPos,this.awaitPos=f||this.awaitPos,l.length>1?((i=this.startNodeAt(p,c)).expressions=l,this.finishNodeAt(i,"SequenceExpression",x,g)):i=l[0]}else i=this.parseParenExpression();if(this.options.preserveParens){let t=this.startNodeAt(r,a);return t.expression=i,this.finishNode(t,"ParenthesizedExpression")}return i},y.parseParenItem=function(t){return t},y.parseParenArrowList=function(t,e,s,i){return this.parseArrowExpression(this.startNodeAt(t,e),s,!1,i)};const f=[];y.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");let e=this.startNode(),s=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(t.dot)){e.meta=s;let t=this.containsEsc;return e.property=this.parseIdent(!0),"target"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),t&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}let i=this.start,r=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),i,r,!0,!1),this.eat(t.parenL)?e.arguments=this.parseExprList(t.parenR,this.options.ecmaVersion>=8,!1):e.arguments=f,this.finishNode(e,"NewExpression")},y.parseTemplateElement=function({isTagged:e}){let s=this.startNode();return this.type===t.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),s.value={raw:this.value,cooked:null}):s.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),s.tail=this.type===t.backQuote,this.finishNode(s,"TemplateElement")},y.parseTemplate=function({isTagged:e=!1}={}){let s=this.startNode();this.next(),s.expressions=[];let i=this.parseTemplateElement({isTagged:e});for(s.quasis=[i];!i.tail;)this.type===t.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(t.dollarBraceL),s.expressions.push(this.parseExpression()),this.expect(t.braceR),s.quasis.push(i=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(s,"TemplateLiteral")},y.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===t.name||this.type===t.num||this.type===t.string||this.type===t.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===t.star)&&!h.test(this.input.slice(this.lastTokEnd,this.start))},y.parseObj=function(e,s){let i=this.startNode(),r=!0,a={};for(i.properties=[],this.next();!this.eat(t.braceR);){if(r)r=!1;else if(this.expect(t.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(t.braceR))break;const n=this.parseProperty(e,s);e||this.checkPropClash(n,a,s),i.properties.push(n)}return this.finishNode(i,e?"ObjectPattern":"ObjectExpression")},y.parseProperty=function(e,s){let i,r,a,n,o=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(t.ellipsis))return e?(o.argument=this.parseIdent(!1),this.type===t.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(o,"RestElement")):(o.argument=this.parseMaybeAssign(!1,s),this.type===t.comma&&s&&s.trailingComma<0&&(s.trailingComma=this.start),this.finishNode(o,"SpreadElement"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(e||s)&&(a=this.start,n=this.startLoc),e||(i=this.eat(t.star)));let h=this.containsEsc;return this.parsePropertyName(o),!e&&!h&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(o)?(r=!0,i=this.options.ecmaVersion>=9&&this.eat(t.star),this.parsePropertyName(o)):r=!1,this.parsePropertyValue(o,e,i,r,a,n,s,h),this.finishNode(o,"Property")},y.parseGetterSetter=function(t){t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);let e="get"===t.kind?0:1;if(t.value.params.length!==e){let e=t.value.start;"get"===t.kind?this.raiseRecoverable(e,"getter should have no params"):this.raiseRecoverable(e,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")},y.parsePropertyValue=function(e,s,i,r,a,n,o,h){(i||r)&&this.type===t.colon&&this.unexpected(),this.eat(t.colon)?(e.value=s?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===t.parenL?(s&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(i,r)):s||h||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===t.comma||this.type===t.braceR||this.type===t.eq?this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((i||r)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=a),e.kind="init",s?e.value=this.parseMaybeDefault(a,n,this.copyNode(e.key)):this.type===t.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(a,n,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected():((i||r)&&this.unexpected(),this.parseGetterSetter(e))},y.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(t.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(t.bracketR),e.key;e.computed=!1}return e.key=this.type===t.num||this.type===t.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},y.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},y.parseMethod=function(e,s,i){let r=this.startNode(),a=this.yieldPos,n=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!s),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(p(s,r.generator)|l|(i?d:0)),this.expect(t.parenL),r.params=this.parseBindingList(t.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=a,this.awaitPos=n,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")},y.parseArrowExpression=function(t,e,s,i){let r=this.yieldPos,a=this.awaitPos,n=this.awaitIdentPos;return this.enterScope(p(s,!1)|c),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!s),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1,i),this.yieldPos=r,this.awaitPos=a,this.awaitIdentPos=n,this.finishNode(t,"ArrowFunctionExpression")},y.parseFunctionBody=function(e,s,i,r){let a=s&&this.type!==t.braceL,n=this.strict,o=!1;if(a)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{let t=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);n&&!t||(o=this.strictDirective(this.end))&&t&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");let r=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!n&&!o&&!s&&!i&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,u),e.body=this.parseBlock(!1,void 0,o&&!n),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=r}this.exitScope()},y.isSimpleParamList=function(t){for(let e of t)if("Identifier"!==e.type)return!1;return!0},y.checkParams=function(t,e){let s=Object.create(null);for(let i of t.params)this.checkLValInnerPattern(i,m,e?null:s)},y.parseExprList=function(e,s,i,r){let a=[],n=!0;for(;!this.eat(e);){if(n)n=!1;else if(this.expect(t.comma),s&&this.afterTrailingComma(e))break;let o;i&&this.type===t.comma?o=null:this.type===t.ellipsis?(o=this.parseSpread(r),r&&this.type===t.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),a.push(o)}return a},y.checkUnreserved=function({start:t,end:e,name:s}){if(this.inGenerator&&"yield"===s&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===s&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===s&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),!this.inClassStaticBlock||"arguments"!==s&&"await"!==s||this.raise(t,`Cannot use ${s} in class static initialization block`),this.keywords.test(s)&&this.raise(t,`Unexpected keyword '${s}'`),this.options.ecmaVersion<6&&-1!==this.input.slice(t,e).indexOf("\\"))return;(this.strict?this.reservedWordsStrict:this.reservedWords).test(s)&&(this.inAsync||"await"!==s||this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,`The keyword '${s}' is reserved`))},y.parseIdent=function(t){let e=this.parseIdentNode();return this.next(!!t),this.finishNode(e,"Identifier"),t||(this.checkUnreserved(e),"await"!==e.name||this.awaitIdentPos||(this.awaitIdentPos=e.start)),e},y.parseIdentNode=function(){let e=this.startNode();return this.type===t.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,"class"!==e.name&&"function"!==e.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),e},y.parsePrivateIdent=function(){const e=this.startNode();return this.type===t.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(0===this.privateNameStack.length?this.raise(e.start,`Private field '#${e.name}' must be declared in an enclosing class`):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e},y.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);let s=this.startNode();return this.next(),this.type===t.semi||this.canInsertSemicolon()||this.type!==t.star&&!this.type.startsExpr?(s.delegate=!1,s.argument=null):(s.delegate=this.eat(t.star),s.argument=this.parseMaybeAssign(e)),this.finishNode(s,"YieldExpression")},y.parseAwait=function(t){this.awaitPos||(this.awaitPos=this.start);let e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,t),this.finishNode(e,"AwaitExpression")}});
//# sourceMappingURL=sourcemaps/expression.js.map
