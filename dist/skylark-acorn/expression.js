/**
 * skylark-acorn - A version of acorn that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./tokentype","./tokencontext","./state","./parseutil","./whitespace","./scopeflags"],function(t,e,s,i,r,a){"use strict";const{types:n}=t,{types:o}=e,{Parser:h}=s,{DestructuringErrors:p}=i,{lineBreak:c}=r,{functionFlags:l,SCOPE_ARROW:d,SCOPE_SUPER:u,SCOPE_DIRECT_SUPER:m,BIND_OUTSIDE:y,BIND_VAR:f}=a,x=h.prototype;x.checkPropClash=function(t,e,s){if(this.options.ecmaVersion>=9&&"SpreadElement"===t.type)return;if(this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))return;let i,{key:r}=t;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}let{kind:a}=t;if(this.options.ecmaVersion>=6)return void("__proto__"===i&&"init"===a&&(e.proto&&(s?s.doubleProto<0&&(s.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),e.proto=!0));let n=e[i="$"+i];if(n){let t;(t="init"===a?this.strict&&n.init||n.get||n.set:n.init||n[a])&&this.raiseRecoverable(r.start,"Redefinition of property")}else n=e[i]={init:!1,get:!1,set:!1};n[a]=!0},x.parseExpression=function(t,e){let s=this.start,i=this.startLoc,r=this.parseMaybeAssign(t,e);if(this.type===n.comma){let a=this.startNodeAt(s,i);for(a.expressions=[r];this.eat(n.comma);)a.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(a,"SequenceExpression")}return r},x.parseMaybeAssign=function(t,e,s){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}let i=!1,r=-1,a=-1,o=-1;e?(r=e.parenthesizedAssign,a=e.trailingComma,o=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new p,i=!0);let h=this.start,c=this.startLoc;this.type!==n.parenL&&this.type!==n.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===t);let l=this.parseMaybeConditional(t,e);if(s&&(l=s.call(this,l,h,c)),this.type.isAssign){let s=this.startNodeAt(h,c);return s.operator=this.value,this.type===n.eq&&(l=this.toAssignable(l,!1,e)),i||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=l.start&&(e.shorthandAssign=-1),this.type===n.eq?this.checkLValPattern(l):this.checkLValSimple(l),s.left=l,this.next(),s.right=this.parseMaybeAssign(t),o>-1&&(e.doubleProto=o),this.finishNode(s,"AssignmentExpression")}return i&&this.checkExpressionErrors(e,!0),r>-1&&(e.parenthesizedAssign=r),a>-1&&(e.trailingComma=a),l},x.parseMaybeConditional=function(t,e){let s=this.start,i=this.startLoc,r=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return r;if(this.eat(n.question)){let e=this.startNodeAt(s,i);return e.test=r,e.consequent=this.parseMaybeAssign(),this.expect(n.colon),e.alternate=this.parseMaybeAssign(t),this.finishNode(e,"ConditionalExpression")}return r},x.parseExprOps=function(t,e){let s=this.start,i=this.startLoc,r=this.parseMaybeUnary(e,!1,!1,t);return this.checkExpressionErrors(e)?r:r.start===s&&"ArrowFunctionExpression"===r.type?r:this.parseExprOp(r,s,i,-1,t)},x.parseExprOp=function(t,e,s,i,r){let a=this.type.binop;if(null!=a&&(!r||this.type!==n._in)&&a>i){let o=this.type===n.logicalOR||this.type===n.logicalAND,h=this.type===n.coalesce;h&&(a=n.logicalAND.binop);let p=this.value;this.next();let c=this.start,l=this.startLoc,d=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),c,l,a,r),u=this.buildBinary(e,s,t,d,p,o||h);return(o&&this.type===n.coalesce||h&&(this.type===n.logicalOR||this.type===n.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(u,e,s,i,r)}return t},x.buildBinary=function(t,e,s,i,r,a){"PrivateIdentifier"===i.type&&this.raise(i.start,"Private identifier can only be left side of binary expression");let n=this.startNodeAt(t,e);return n.left=s,n.operator=r,n.right=i,this.finishNode(n,a?"LogicalExpression":"BinaryExpression")},x.parseMaybeUnary=function(t,e,s,i){let r,a=this.start,o=this.startLoc;if(this.isContextual("await")&&this.canAwait)r=this.parseAwait(i),e=!0;else if(this.type.prefix){let s=this.startNode(),a=this.type===n.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0,a,i),this.checkExpressionErrors(t,!0),a?this.checkLValSimple(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):"delete"===s.operator&&function t(e){return"MemberExpression"===e.type&&"PrivateIdentifier"===e.property.type||"ChainExpression"===e.type&&t(e.expression)}(s.argument)?this.raiseRecoverable(s.start,"Private fields can not be deleted"):e=!0,r=this.finishNode(s,a?"UpdateExpression":"UnaryExpression")}else if(e||this.type!==n.privateId){if(r=this.parseExprSubscripts(t,i),this.checkExpressionErrors(t))return r;for(;this.type.postfix&&!this.canInsertSemicolon();){let t=this.startNodeAt(a,o);t.operator=this.value,t.prefix=!1,t.argument=r,this.checkLValSimple(r),this.next(),r=this.finishNode(t,"UpdateExpression")}}else(i||0===this.privateNameStack.length)&&this.options.checkPrivateFields&&this.unexpected(),r=this.parsePrivateIdent(),this.type!==n._in&&this.unexpected();return s||!this.eat(n.starstar)?r:e?void this.unexpected(this.lastTokStart):this.buildBinary(a,o,r,this.parseMaybeUnary(null,!1,!1,i),"**",!1)},x.parseExprSubscripts=function(t,e){let s=this.start,i=this.startLoc,r=this.parseExprAtom(t,e);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;let a=this.parseSubscripts(r,s,i,!1,e);return t&&"MemberExpression"===a.type&&(t.parenthesizedAssign>=a.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=a.start&&(t.parenthesizedBind=-1),t.trailingComma>=a.start&&(t.trailingComma=-1)),a},x.parseSubscripts=function(t,e,s,i,r){let a=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start==5&&this.potentialArrowAt===t.start,n=!1;for(;;){let o=this.parseSubscript(t,e,s,i,a,n,r);if(o.optional&&(n=!0),o===t||"ArrowFunctionExpression"===o.type){if(n){const t=this.startNodeAt(e,s);t.expression=o,o=this.finishNode(t,"ChainExpression")}return o}t=o}},x.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(n.arrow)},x.parseSubscriptAsyncArrow=function(t,e,s,i){return this.parseArrowExpression(this.startNodeAt(t,e),s,!0,i)},x.parseSubscript=function(t,e,s,i,r,a,o){let h=this.options.ecmaVersion>=11,c=h&&this.eat(n.questionDot);i&&c&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");let l=this.eat(n.bracketL);if(l||c&&this.type!==n.parenL&&this.type!==n.backQuote||this.eat(n.dot)){let i=this.startNodeAt(e,s);i.object=t,l?(i.property=this.parseExpression(),this.expect(n.bracketR)):this.type===n.privateId&&"Super"!==t.type?i.property=this.parsePrivateIdent():i.property=this.parseIdent("never"!==this.options.allowReserved),i.computed=!!l,h&&(i.optional=c),t=this.finishNode(i,"MemberExpression")}else if(!i&&this.eat(n.parenL)){let i=new p,a=this.yieldPos,l=this.awaitPos,d=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;let u=this.parseExprList(n.parenR,this.options.ecmaVersion>=8,!1,i);if(r&&!c&&this.shouldParseAsyncArrow())return this.checkPatternErrors(i,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=a,this.awaitPos=l,this.awaitIdentPos=d,this.parseSubscriptAsyncArrow(e,s,u,o);this.checkExpressionErrors(i,!0),this.yieldPos=a||this.yieldPos,this.awaitPos=l||this.awaitPos,this.awaitIdentPos=d||this.awaitIdentPos;let m=this.startNodeAt(e,s);m.callee=t,m.arguments=u,h&&(m.optional=c),t=this.finishNode(m,"CallExpression")}else if(this.type===n.backQuote){(c||a)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");let i=this.startNodeAt(e,s);i.tag=t,i.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(i,"TaggedTemplateExpression")}return t},x.parseExprAtom=function(t,e,s){this.type===n.slash&&this.readRegexp();let i,r=this.potentialArrowAt===this.start;switch(this.type){case n._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),i=this.startNode(),this.next(),this.type!==n.parenL||this.allowDirectSuper||this.raise(i.start,"super() call outside constructor of a subclass"),this.type!==n.dot&&this.type!==n.bracketL&&this.type!==n.parenL&&this.unexpected(),this.finishNode(i,"Super");case n._this:return i=this.startNode(),this.next(),this.finishNode(i,"ThisExpression");case n.name:let a=this.start,h=this.startLoc,p=this.containsEsc,c=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!p&&"async"===c.name&&!this.canInsertSemicolon()&&this.eat(n._function))return this.overrideContext(o.f_expr),this.parseFunction(this.startNodeAt(a,h),0,!1,!0,e);if(r&&!this.canInsertSemicolon()){if(this.eat(n.arrow))return this.parseArrowExpression(this.startNodeAt(a,h),[c],!1,e);if(this.options.ecmaVersion>=8&&"async"===c.name&&this.type===n.name&&!p&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return c=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(n.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(a,h),[c],!0,e)}return c;case n.regexp:let l=this.value;return(i=this.parseLiteral(l.value)).regex={pattern:l.pattern,flags:l.flags},i;case n.num:case n.string:return this.parseLiteral(this.value);case n._null:case n._true:case n._false:return(i=this.startNode()).value=this.type===n._null?null:this.type===n._true,i.raw=this.type.keyword,this.next(),this.finishNode(i,"Literal");case n.parenL:let d=this.start,u=this.parseParenAndDistinguishExpression(r,e);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(t.parenthesizedAssign=d),t.parenthesizedBind<0&&(t.parenthesizedBind=d)),u;case n.bracketL:return i=this.startNode(),this.next(),i.elements=this.parseExprList(n.bracketR,!0,!0,t),this.finishNode(i,"ArrayExpression");case n.braceL:return this.overrideContext(o.b_expr),this.parseObj(!1,t);case n._function:return i=this.startNode(),this.next(),this.parseFunction(i,0);case n._class:return this.parseClass(this.startNode(),!1);case n._new:return this.parseNew();case n.backQuote:return this.parseTemplate();case n._import:return this.options.ecmaVersion>=11?this.parseExprImport(s):this.unexpected();default:return this.parseExprAtomDefault()}},x.parseExprAtomDefault=function(){this.unexpected()},x.parseExprImport=function(t){const e=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");const s=this.parseIdent(!0);return this.type!==n.parenL||t?this.type===n.dot?(e.meta=s,this.parseImportMeta(e)):void this.unexpected():this.parseDynamicImport(e)},x.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(n.parenR)){const t=this.start;this.eat(n.comma)&&this.eat(n.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(t,"ImportExpression")},x.parseImportMeta=function(t){this.next();const e=this.containsEsc;return t.property=this.parseIdent(!0),"meta"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")},x.parseLiteral=function(t){let e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")},x.parseParenExpression=function(){this.expect(n.parenL);let t=this.parseExpression();return this.expect(n.parenR),t},x.shouldParseArrow=function(t){return!this.canInsertSemicolon()},x.parseParenAndDistinguishExpression=function(t,e){let s,i=this.start,r=this.startLoc,a=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();let o,h=this.start,c=this.startLoc,l=[],d=!0,u=!1,m=new p,y=this.yieldPos,f=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==n.parenR;){if(d?d=!1:this.expect(n.comma),a&&this.afterTrailingComma(n.parenR,!0)){u=!0;break}if(this.type===n.ellipsis){o=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===n.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,m,this.parseParenItem))}let x=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(n.parenR),t&&this.shouldParseArrow(l)&&this.eat(n.arrow))return this.checkPatternErrors(m,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=y,this.awaitPos=f,this.parseParenArrowList(i,r,l,e);l.length&&!u||this.unexpected(this.lastTokStart),o&&this.unexpected(o),this.checkExpressionErrors(m,!0),this.yieldPos=y||this.yieldPos,this.awaitPos=f||this.awaitPos,l.length>1?((s=this.startNodeAt(h,c)).expressions=l,this.finishNodeAt(s,"SequenceExpression",x,g)):s=l[0]}else s=this.parseParenExpression();if(this.options.preserveParens){let t=this.startNodeAt(i,r);return t.expression=s,this.finishNode(t,"ParenthesizedExpression")}return s},x.parseParenItem=function(t){return t},x.parseParenArrowList=function(t,e,s,i){return this.parseArrowExpression(this.startNodeAt(t,e),s,!1,i)};const g=[];x.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");let t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(n.dot)){t.meta=e;let s=this.containsEsc;return t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),s&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(t.start,"'new.target' can only be used in functions and class static block"),this.finishNode(t,"MetaProperty")}let s=this.start,i=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),s,i,!0,!1),this.eat(n.parenL)?t.arguments=this.parseExprList(n.parenR,this.options.ecmaVersion>=8,!1):t.arguments=g,this.finishNode(t,"NewExpression")},x.parseTemplateElement=function({isTagged:t}){let e=this.startNode();return this.type===n.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),e.value={raw:this.value,cooked:null}):e.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),e.tail=this.type===n.backQuote,this.finishNode(e,"TemplateElement")},x.parseTemplate=function({isTagged:t=!1}={}){let e=this.startNode();this.next(),e.expressions=[];let s=this.parseTemplateElement({isTagged:t});for(e.quasis=[s];!s.tail;)this.type===n.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(n.dollarBraceL),e.expressions.push(this.parseExpression()),this.expect(n.braceR),e.quasis.push(s=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(e,"TemplateLiteral")},x.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===n.name||this.type===n.num||this.type===n.string||this.type===n.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===n.star)&&!c.test(this.input.slice(this.lastTokEnd,this.start))},x.parseObj=function(t,e){let s=this.startNode(),i=!0,r={};for(s.properties=[],this.next();!this.eat(n.braceR);){if(i)i=!1;else if(this.expect(n.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(n.braceR))break;const a=this.parseProperty(t,e);t||this.checkPropClash(a,r,e),s.properties.push(a)}return this.finishNode(s,t?"ObjectPattern":"ObjectExpression")},x.parseProperty=function(t,e){let s,i,r,a,o=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(n.ellipsis))return t?(o.argument=this.parseIdent(!1),this.type===n.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(o,"RestElement")):(o.argument=this.parseMaybeAssign(!1,e),this.type===n.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(o,"SpreadElement"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(t||e)&&(r=this.start,a=this.startLoc),t||(s=this.eat(n.star)));let h=this.containsEsc;return this.parsePropertyName(o),!t&&!h&&this.options.ecmaVersion>=8&&!s&&this.isAsyncProp(o)?(i=!0,s=this.options.ecmaVersion>=9&&this.eat(n.star),this.parsePropertyName(o)):i=!1,this.parsePropertyValue(o,t,s,i,r,a,e,h),this.finishNode(o,"Property")},x.parseGetterSetter=function(t){t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);let e="get"===t.kind?0:1;if(t.value.params.length!==e){let e=t.value.start;"get"===t.kind?this.raiseRecoverable(e,"getter should have no params"):this.raiseRecoverable(e,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")},x.parsePropertyValue=function(t,e,s,i,r,a,o,h){(s||i)&&this.type===n.colon&&this.unexpected(),this.eat(n.colon)?(t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),t.kind="init"):this.options.ecmaVersion>=6&&this.type===n.parenL?(e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(s,i)):e||h||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===n.comma||this.type===n.braceR||this.type===n.eq?this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((s||i)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=r),t.kind="init",e?t.value=this.parseMaybeDefault(r,a,this.copyNode(t.key)):this.type===n.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),t.value=this.parseMaybeDefault(r,a,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected():((s||i)&&this.unexpected(),this.parseGetterSetter(t))},x.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(n.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(n.bracketR),t.key;t.computed=!1}return t.key=this.type===n.num||this.type===n.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},x.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},x.parseMethod=function(t,e,s){let i=this.startNode(),r=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=t),this.options.ecmaVersion>=8&&(i.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(l(e,i.generator)|u|(s?m:0)),this.expect(n.parenL),i.params=this.parseBindingList(n.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0,!1),this.yieldPos=r,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(i,"FunctionExpression")},x.parseArrowExpression=function(t,e,s,i){let r=this.yieldPos,a=this.awaitPos,n=this.awaitIdentPos;return this.enterScope(l(s,!1)|d),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!s),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1,i),this.yieldPos=r,this.awaitPos=a,this.awaitIdentPos=n,this.finishNode(t,"ArrowFunctionExpression")},x.parseFunctionBody=function(t,e,s,i){let r=e&&this.type!==n.braceL,a=this.strict,o=!1;if(r)t.body=this.parseMaybeAssign(i),t.expression=!0,this.checkParams(t,!1);else{let i=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);a&&!i||(o=this.strictDirective(this.end))&&i&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");let r=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(t,!a&&!o&&!e&&!s&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,y),t.body=this.parseBlock(!1,void 0,o&&!a),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=r}this.exitScope()},x.isSimpleParamList=function(t){for(let e of t)if("Identifier"!==e.type)return!1;return!0},x.checkParams=function(t,e){let s=Object.create(null);for(let i of t.params)this.checkLValInnerPattern(i,f,e?null:s)},x.parseExprList=function(t,e,s,i){let r=[],a=!0;for(;!this.eat(t);){if(a)a=!1;else if(this.expect(n.comma),e&&this.afterTrailingComma(t))break;let o;s&&this.type===n.comma?o=null:this.type===n.ellipsis?(o=this.parseSpread(i),i&&this.type===n.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):o=this.parseMaybeAssign(!1,i),r.push(o)}return r},x.checkUnreserved=function({start:t,end:e,name:s}){if(this.inGenerator&&"yield"===s&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===s&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===s&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),!this.inClassStaticBlock||"arguments"!==s&&"await"!==s||this.raise(t,`Cannot use ${s} in class static initialization block`),this.keywords.test(s)&&this.raise(t,`Unexpected keyword '${s}'`),this.options.ecmaVersion<6&&-1!==this.input.slice(t,e).indexOf("\\"))return;(this.strict?this.reservedWordsStrict:this.reservedWords).test(s)&&(this.inAsync||"await"!==s||this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,`The keyword '${s}' is reserved`))},x.parseIdent=function(t){let e=this.parseIdentNode();return this.next(!!t),this.finishNode(e,"Identifier"),t||(this.checkUnreserved(e),"await"!==e.name||this.awaitIdentPos||(this.awaitIdentPos=e.start)),e},x.parseIdentNode=function(){let t=this.startNode();return this.type===n.name?t.name=this.value:this.type.keyword?(t.name=this.type.keyword,"class"!==t.name&&"function"!==t.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),t},x.parsePrivateIdent=function(){const t=this.startNode();return this.type===n.privateId?t.name=this.value:this.unexpected(),this.next(),this.finishNode(t,"PrivateIdentifier"),this.options.checkPrivateFields&&(0===this.privateNameStack.length?this.raise(t.start,`Private field '#${t.name}' must be declared in an enclosing class`):this.privateNameStack[this.privateNameStack.length-1].used.push(t)),t},x.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);let e=this.startNode();return this.next(),this.type===n.semi||this.canInsertSemicolon()||this.type!==n.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(n.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},x.parseAwait=function(t){this.awaitPos||(this.awaitPos=this.start);let e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,t),this.finishNode(e,"AwaitExpression")}});
//# sourceMappingURL=sourcemaps/expression.js.map
