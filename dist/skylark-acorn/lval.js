/**
 * skylark-acorn - A version of acorn that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./tokentype","./state","./util","./scopeflags"],function(e,t,s,i){"use strict";const{Parser:a}=t,{hasOwn:n}=s,{BIND_NONE:r,BIND_OUTSIDE:c,BIND_LEXICAL:h}=i,o=a.prototype;o.toAssignable=function(e,t,s){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",s&&this.checkPatternErrors(s,!0);for(let s of e.properties)this.toAssignable(s,t),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token");break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",s&&this.checkPatternErrors(s,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,s);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else s&&this.checkPatternErrors(s,!0);return e},o.toAssignableList=function(e,t){let s=e.length;for(let i=0;i<s;i++){let s=e[i];s&&this.toAssignable(s,t)}if(s){let i=e[s-1];6===this.options.ecmaVersion&&t&&i&&"RestElement"===i.type&&"Identifier"!==i.argument.type&&this.unexpected(i.argument.start)}return e},o.parseSpread=function(e){let t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},o.parseRestBinding=function(){let t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==e.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},o.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case e.bracketL:let t=this.startNode();return this.next(),t.elements=this.parseBindingList(e.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case e.braceL:return this.parseObj(!0)}return this.parseIdent()},o.parseBindingList=function(t,s,i,a){let n=[],r=!0;for(;!this.eat(t);)if(r?r=!1:this.expect(e.comma),s&&this.type===e.comma)n.push(null);else{if(i&&this.afterTrailingComma(t))break;if(this.type===e.ellipsis){let s=this.parseRestBinding();this.parseBindingListItem(s),n.push(s),this.type===e.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}n.push(this.parseAssignableListItem(a))}return n},o.parseAssignableListItem=function(e){let t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t},o.parseBindingListItem=function(e){return e},o.parseMaybeDefault=function(t,s,i){if(i=i||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(e.eq))return i;let a=this.startNodeAt(t,s);return a.left=i,a.right=this.parseMaybeAssign(),this.finishNode(a,"AssignmentPattern")},o.checkLValSimple=function(e,t=r,s){const i=t!==r;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(i?"Binding ":"Assigning to ")+e.name+" in strict mode"),i&&(t===h&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),s&&(n(s,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),s[e.name]=!0),t!==c&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,s);default:this.raise(e.start,(i?"Binding":"Assigning to")+" rvalue")}},o.checkLValPattern=function(e,t=r,s){switch(e.type){case"ObjectPattern":for(let i of e.properties)this.checkLValInnerPattern(i,t,s);break;case"ArrayPattern":for(let i of e.elements)i&&this.checkLValInnerPattern(i,t,s);break;default:this.checkLValSimple(e,t,s)}},o.checkLValInnerPattern=function(e,t=r,s){switch(e.type){case"Property":this.checkLValInnerPattern(e.value,t,s);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,s);break;case"RestElement":this.checkLValPattern(e.argument,t,s);break;default:this.checkLValPattern(e,t,s)}}});
//# sourceMappingURL=sourcemaps/lval.js.map
