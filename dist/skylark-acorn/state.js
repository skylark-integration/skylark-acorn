/**
 * skylark-acorn - A version of acorn that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./identifier","./tokentype","./whitespace","./options","./util","./scopeflags"],function(t,e,s,i,r,n){"use strict";const{reservedWords:o,keywords:a}=t,{types:l}=e,{lineBreak:h}=s,{getOptions:c}=i,{wordsRegexp:u}=r,{SCOPE_TOP:p,SCOPE_FUNCTION:d,SCOPE_ASYNC:S,SCOPE_GENERATOR:g,SCOPE_SUPER:w,SCOPE_DIRECT_SUPER:f,SCOPE_CLASS_STATIC_BLOCK:C}=n;return{Parser:class{constructor(t,e,s){this.options=t=c(t),this.sourceFile=t.sourceFile,this.keywords=u(a[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);let i="";!0!==t.allowReserved&&(i=o[t.ecmaVersion>=6?6:5===t.ecmaVersion?5:3],"module"===t.sourceType&&(i+=" await")),this.reservedWords=u(i);let r=(i?i+" ":"")+o.strict;this.reservedWordsStrict=u(r),this.reservedWordsStrictBind=u(r+" "+o.strictBind),this.input=String(e),this.containsEsc=!1,s?(this.pos=s,this.lineStart=this.input.lastIndexOf("\n",s-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(h).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=l.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(p),this.regexpState=null,this.privateNameStack=[]}parse(){let t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)}get inFunction(){return(this.currentVarScope().flags&d)>0}get inGenerator(){return(this.currentVarScope().flags&g)>0&&!this.currentVarScope().inClassFieldInit}get inAsync(){return(this.currentVarScope().flags&S)>0&&!this.currentVarScope().inClassFieldInit}get canAwait(){for(let t=this.scopeStack.length-1;t>=0;t--){let e=this.scopeStack[t];if(e.inClassFieldInit||e.flags&C)return!1;if(e.flags&d)return(e.flags&S)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction}get allowSuper(){const{flags:t,inClassFieldInit:e}=this.currentThisScope();return(t&w)>0||e||this.options.allowSuperOutsideMethod}get allowDirectSuper(){return(this.currentThisScope().flags&f)>0}get treatFunctionsAsVar(){return this.treatFunctionsAsVarInScope(this.currentScope())}get allowNewDotTarget(){const{flags:t,inClassFieldInit:e}=this.currentThisScope();return(t&(d|C))>0||e}get inClassStaticBlock(){return(this.currentVarScope().flags&C)>0}static extend(...t){let e=this;for(let s=0;s<t.length;s++)e=t[s](e);return e}static parse(t,e){return new this(e,t).parse()}static parseExpressionAt(t,e,s){let i=new this(s,t,e);return i.nextToken(),i.parseExpression()}static tokenizer(t,e){return new this(e,t)}}}});
//# sourceMappingURL=sourcemaps/state.js.map
