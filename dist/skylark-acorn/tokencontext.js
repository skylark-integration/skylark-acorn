/**
 * skylark-acorn - A version of acorn that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./state","./tokentype","./whitespace"],function(t,e,n){"use strict";const{Parser:o}=t,{lineBreak:i}=n;class s{constructor(t,e,n,o,i){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=o,this.generator=!!i}}const r={b_stat:new s("{",!1),b_expr:new s("{",!0),b_tmpl:new s("${",!1),p_stat:new s("(",!1),p_expr:new s("(",!0),q_tmpl:new s("`",!0,!0,t=>t.tryReadTemplateToken()),f_stat:new s("function",!1),f_expr:new s("function",!0),f_expr_gen:new s("function",!0,!1,null,!0),f_gen:new s("function",!1,!1,null,!0)},p=o.prototype;return p.initialContext=function(){return[r.b_stat]},p.curContext=function(){return this.context[this.context.length-1]},p.braceIsBlock=function(t){let n=this.curContext();return n===r.f_expr||n===r.f_stat||(t!==e.colon||n!==r.b_stat&&n!==r.b_expr?t===e._return||t===e.name&&this.exprAllowed?i.test(this.input.slice(this.lastTokEnd,this.start)):t===e._else||t===e.semi||t===e.eof||t===e.parenR||t===e.arrow||(t===e.braceL?n===r.b_stat:t!==e._var&&t!==e._const&&t!==e.name&&!this.exprAllowed):!n.isExpr)},p.inGeneratorContext=function(){for(let t=this.context.length-1;t>=1;t--){let e=this.context[t];if("function"===e.token)return e.generator}return!1},p.updateContext=function(t){let n,o=this.type;o.keyword&&t===e.dot?this.exprAllowed=!1:(n=o.updateContext)?n.call(this,t):this.exprAllowed=o.beforeExpr},p.overrideContext=function(t){this.curContext()!==t&&(this.context[this.context.length-1]=t)},e.parenR.updateContext=e.braceR.updateContext=function(){if(1===this.context.length)return void(this.exprAllowed=!0);let t=this.context.pop();t===r.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr},e.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?r.b_stat:r.b_expr),this.exprAllowed=!0},e.dollarBraceL.updateContext=function(){this.context.push(r.b_tmpl),this.exprAllowed=!0},e.parenL.updateContext=function(t){let n=t===e._if||t===e._for||t===e._with||t===e._while;this.context.push(n?r.p_stat:r.p_expr),this.exprAllowed=!0},e.incDec.updateContext=function(){},e._function.updateContext=e._class.updateContext=function(t){!t.beforeExpr||t===e._else||t===e.semi&&this.curContext()!==r.p_stat||t===e._return&&i.test(this.input.slice(this.lastTokEnd,this.start))||(t===e.colon||t===e.braceL)&&this.curContext()===r.b_stat?this.context.push(r.f_stat):this.context.push(r.f_expr),this.exprAllowed=!1},e.backQuote.updateContext=function(){this.curContext()===r.q_tmpl?this.context.pop():this.context.push(r.q_tmpl),this.exprAllowed=!1},e.star.updateContext=function(t){if(t===e._function){let t=this.context.length-1;this.context[t]===r.f_expr?this.context[t]=r.f_expr_gen:this.context[t]=r.f_gen}this.exprAllowed=!0},e.name.updateContext=function(t){let n=!1;this.options.ecmaVersion>=6&&t!==e.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(n=!0),this.exprAllowed=n},{TokContext:s,types:r}});
//# sourceMappingURL=sourcemaps/tokencontext.js.map
